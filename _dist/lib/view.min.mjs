/*! ****************************************************************************
 * View v0.0.8-beta.4
 *
 * A companion View library for building web applications.
 * (you can download it from npm or github repositories)
 * Copyright (c) 2020 Mobilabs <contact@mobilabs.fr> (http://www.mobilabs.fr).
 * Released under the MIT license. You may obtain a copy of the License
 * at: http://www.opensource.org/licenses/mit-license.php).
 * Built from ES6Kadoo v0.0.0-beta.7.
 * ************************************************************************** */
const $__ES6GLOB={};!function(e,t){"use strict";"function"==typeof define&&define.amd?define([""],t):"object"==typeof exports?module.exports=t(e):e.View=t(e)}($__ES6GLOB,e=>{"use strict";let t={src:{view:{},component:{main:{},hyperscript:{},diffing:{},generic:{},$:{},render:{},util:{},animate:{}},renderer:{main:{}},lib:{_:{}}},libin:{}};return t.extend=function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++)e[n[i]]=t[n[i]]},function(e,t){"function"==typeof define&&define.amd?define([""],t):"object"==typeof exports?(module.exports=t(e),e.Messenger=t(e),null===e.Messenger&&(e.Messenger=t(e))):e.Messenger=t(e)}(t.libin,e=>{let t,n;return function(){const i=e.Messenger;let r;t=function(){const e=Object.create(r);return e._db={},e},t.VERSION="0.0.4",t.noConflict=function(){return e.Messenger=i,this},r={subscribe(e,t){return n.subscribe(this._db,e,t),this},subscribeOnce(e,t){return n.subscribeOnce(this._db,e,t),this},unsubscribe(e,t){return n.unsubscribe(this._db,e,t),this},publish(e,t){return n.publish(this._db,e,t),this}}}(),function(){function e(e,t){"string"==typeof t&&function(e,t){Object.prototype.hasOwnProperty.call(e,t)||(e[t]={listeners:[],listenersOnce:[]})}(e,t)}n={subscribe(t,n,i){!function(t,n,i){e(t,n),"string"==typeof n&&"function"==typeof i&&Object.prototype.hasOwnProperty.call(t,n)&&t[n].listeners.push(i)}(t,n,i)},subscribeOnce(t,n,i){!function(t,n,i){e(t,n),"string"==typeof n&&"function"==typeof i&&Object.prototype.hasOwnProperty.call(t,n)&&t[n].listenersOnce.push(i)}(t,n,i)},unsubscribe(e,t,n){!function(e,t,n){let i;"string"==typeof t&&"function"==typeof n&&Object.prototype.hasOwnProperty.call(e,t)&&(i=e[t].listeners.indexOf(n),i>=0&&e[t].listeners.splice(i,1),i=e[t].listenersOnce.indexOf(n),i>=0&&e[t].listenersOnce.splice(i,1))}(e,t,n)},publish(e,t,n){!function(e,t,n){if("string"==typeof t&&Object.prototype.hasOwnProperty.call(e,t)){for(let i=0;i<e[t].listeners.length;i++)e[t].listeners[i](n);for(let i=0;i<e[t].listenersOnce.length;i++)e[t].listenersOnce[i](n);e[t].listenersOnce.splice(0,e[t].listenersOnce.length)}}(e,t,n)}}}(),t}),function(){const n=t.src.component.main,i=t.src.renderer.main,{_:r}=t.src.lib,s=t.src.component.hyperscript,o=t.src.component.diffing,c=e.View,l={_setTestMode:()=>[r,n.Component,s,o],noConflict(){return e.View=c,this},Component:e=>n.Component(e),render:e=>i.render(e),restore:e=>i.restore(e),append:e=>i.append(e),prepend:e=>i.prepend(e),remove:e=>i.remove(e),VERSION:"0.0.8-beta.4"};t.src.view=l}(),function(){const{_:e}=t.src.lib,n=t.src.component.generic,i=t.src.component.$,r=t.src.component.render;function s(t){let r;const s=function(){return this instanceof s?n.Construct.apply(this,r):(r=arguments,new s)},o=e.assign({},n.methods),c=e.assign(o,{$:i.$});return s.prototype=e.assign(c,t||{}),s.prototype.constructor=s,s}s._attachChild=function(e,t,n,i){r.attachChild(e,t,n,i)},s._removeChild=function(e,t){r.removeChild(e,t)},t.extend(t.src.component.main,{Component:s})}(),function(){const{Messenger:e}=t.libin,n=t.src.component.main,{_:i}=t.src.lib;function r(e){if(e._cList){const t=Object.keys(e._cList);for(let n=0;n<t.length;n++)e._cList[t[n]].events(),r(e._cList[t[n]])}}function s(e,t){if(e._cList){const n=Object.keys(e._cList);for(let i=0;i<n.length;i++)e._cList[n[i]]._mess=t,s(e._cList[n[i]],t)}}function o(e){const t={el:"body",children:null,template:"<div></div>"};return e.el&&(!i.isString(e.el)||"#"!==e.el.charAt(0)&&"."!==e.el.charAt(0)?i.isObject(e.el)&&e.el.namespaceURI?t.el=e.el:console.log("warning: el must be an id, a class or a node element!"):t.el=e.el),i.isString(e.template)&&(e.template.includes("<div")||e.template.includes("<header")||e.template.includes("<footer"))?t.template=e.template:console.log("warning: template must be an XMLString starting with <div or <header or <footer!"),t.children=e.children,t}function c(e){const t=i.isString(e.el)?document.querySelector(e.el):e.el;"body"===e.el?t.innerHTML+=e.template:t.innerHTML=e.template}function l(t){const l=o(t);if(!t.children&&!t.template)return function(t){const r=o(t);if("body"===r.el)return null;let s;s=i.isString(r.el)?document.querySelector(r.el):r.el;const c=s.outerHTML,l=s.getAttribute("id");l&&s.removeAttribute("id");const a=s.outerHTML;let u={};t.methods&&(u=t.methods);const d=n.Component(i.extend(u,{render:()=>a}))(),h=d._renderer(),p=document.createElement("template");p.innerHTML=h;const f=p.content.firstChild;return s.parentNode.replaceChild(f,s),l&&(f.setAttribute("id",l),d.id=l),d._mess=e(),d._initialXMLNode=c,d}(t);if(!l.children)return c(l),null;const a=n.Component({render(){return this.name="firstparent",this.children=l.children,l.template}})();return l.template=a._renderer(),c(l),a._mess=e(),s(a,a._mess),r(a),a}function a(e,t,n,r){const s=e.$getChild(t)._renderer();n?i.isString(n)&&e.$(n)[0]?"first"===r?e.$(n).prepend(s):e.$(n).appendHTML(s):(console.log("warning: View.append: params.el is not valid! Component appended to the parent node."),"first"===r?e.$().prepend(s):e.$().appendHTML(s)):"first"===r?e.$().prepend(s):e.$().appendHTML(s)}function u(e,t){const{root:o}=e,{children:c}=e,{el:l}=e;let u,d,h,p,f,g,{parent:m}=e;if(m||(m=o),i.isString(m)){if(!i.isObject(o)||!Object.prototype.hasOwnProperty.call(o,"_cList"))return console.log("warning: View.append: params.root is not valid!"),null;if(u=o.$getChild(m),!u)return console.log(`warning: View.append: ${m} does not exist!`),null}else{if(!i.isObject(m)||!Object.prototype.hasOwnProperty.call(m,"_cList"))return console.log(`warning: View.append: ${m} is improperly defined!`),null;u=m}if(!i.isLiteralObject(c))return console.log("warning: View.append: params.children is not valid!"),null;const b=Object.keys(c);for(let e=0;e<b.length;e++){if(g=b[e],d=c[b[e]],i.isLiteralObject(d))p=d.fn,f=d.options;else{if(!i.isFunction(d))return console.log("warning: View.append: params.children is not valid!"),null;p=d,f=void 0}n.Component._attachChild(u,p,f,g),a(u,g,l,t),h=u.$getChild(g),h._mess=u._mess,s(h,u._mess),h.events(),r(h)}return!0}const d={render:e=>l(e),restore:e=>function(e){if(e&&e._initialXMLNode){const t=document.createElement("template");t.innerHTML=e._initialXMLNode;const n=t.content.firstChild;return e.$()[0].parentNode.replaceChild(n,e.$()[0]),!0}return!1}(e),append:e=>u(e),prepend:e=>u(e,"first"),remove:e=>function(e){const{root:t}=e,{parent:r}=e,{children:s}=e;let o;if(i.isString(r)){if(!i.isObject(t)||!Object.prototype.hasOwnProperty.call(t,"_cList"))return console.log("warning: View.append: params.root is not valid!"),null;if(o=t.$getChild(r),!o)return console.log(`warning: View.append: ${r} does not exist!`),null}else{if(!i.isObject(r)||!Object.prototype.hasOwnProperty.call(r,"_cList"))return console.log(`warning: View.append: ${r} is improperly defined!`),null;o=r}if(!i.isString(s))return console.log("warning: View.append: params.children is not valid!"),null;const c=o.$getChild(s),l=o.$("#"+c.id)[0];return o.$("#"+c.id).parent().removeChild(l),n.Component._removeChild(o,s),!0}(e)};t.extend(t.src.renderer.main,d)}(),function(){const e={extend(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i++)e[n[i]]=t[n[i]];return e},assign(){const e=arguments[0];let t,n,i;for(i=1;i<arguments.length;i++)t=arguments[i],n=Object.keys(t).reduce((e,n)=>(e[n]=Object.getOwnPropertyDescriptor(t,n),e),{});return Object.defineProperties(e,n),e},isString:e=>"[object String]"===Object.prototype.toString.call(e),isNumber:e=>"[object Number]"===Object.prototype.toString.call(e),isObject(e){const t=typeof e;return("function"===t||"object"===t)&&!!e},isLiteralObject:e=>"[object Object]"===Object.prototype.toString.call(e),isFunction:e=>"[object Function]"===Object.prototype.toString.call(e),isArray:e=>"[object Array]"===Object.prototype.toString.call(e)};t.extend(t.src.lib._,e)}(),function(){const{_:e}=t.src.lib;function n(e){const t=Object.keys(e);let n="";for(let i=0;i<t.length;i++)n+=i<t.length-1?`${t[i]}: ${e[t[i]]}; `:`${t[i]}: ${e[t[i]]};`;return n}const i={render(t,i){const r={};return function(e,t,n){const i=Object.keys(n);for(let r=0;r<i.length;r++)e=e.replace(`</${i[r].toLowerCase()}>`,"").replace(i[r].toLowerCase(),i[r]+" /"),t[`<${i[r]} />`]=n[i[r]];return e}((new XMLSerializer).serializeToString(function t(i,r){const{nodeName:s}=i,{attributes:o}=i,{children:c}=i;let l,a,u,d,h,p;if(e.isString(i))return document.createTextNode(i);switch(typeof s){case"string":for(l=document.createElement(s),a=o?Object.keys(o):[],p=0;p<a.length;p++)u=e.isObject(o[a[p]])?n(o[a[p]]):o[a[p]],l.setAttribute(a[p],u);break;case"function":d=s(),d.render?(h=o&&o.name?o.name:"C"+Math.random().toString(36).substr(2,7),r[h]={fn:s,options:o.options?o.options:null},l=t({nodeName:h,attributes:null,children:[]},r)):l=t(d,r);break;default:throw new Error(`hypserscript._render: nodeName is a ${typeof s} ???`)}for(p=0;p<c.length;p++)l.appendChild(t(c[p],r));return l}(t,r)).replace('xmlns="http://www.w3.org/1999/xhtml"',""),i,r)}};t.extend(t.src.component.hyperscript,i)}(),function(){function e(e){return 3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase()}function n(e){return e.children&&e.children.length>0?null:e.textContent}const i={stringToHTML:e=>function(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}(e),diff:(t,i)=>function t(i,r){const s=Array.prototype.slice.call(i.children),o=Array.prototype.slice.call(r.children);let c=o.length-s.length;if(c>0)for(;c>0;c--)o[o.length-c].parentNode.removeChild(o[o.length-c]);s.forEach((i,s)=>{if(!o[s])return void r.appendChild(i.cloneNode(!0));if(e(i)!==e(o[s]))return void o[s].parentNode.replaceChild(i.cloneNode(!0),o[s]);const c=n(i);if(c&&c!==n(o[s])&&(o[s].textContent=c),(i.hasAttributes()||o[s].hasAttributes())&&function(e,t){const n=e.getAttributeNames(),i=t.getAttributeNames();for(let i=0;i<n.length;i++){const r=n[i],s=t.attributes.getNamedItem(r),o=e.getAttribute(r),c=t.getAttribute(r);s&&c===o||t.setAttribute(r,o)}for(let e=0;e<i.length;e++)-1===n.indexOf(i[e])&&t.removeAttribute(i[e])}(i,o[s]),o[s].children.length>0&&i.children.length<1)o[s].innerHTML="";else{if(o[s].children.length<1&&i.children.length>0){const e=document.createDocumentFragment();t(i,e),o[s].appendChild(e)}i.children.length>0&&t(i,o[s])}})}(t,i)};t.extend(t.src.component.diffing,i)}(),function(){const{_:e}=t.src.lib,n=t.src.component.render,i=t.src.component.util;const r={_init(t){return this._tag=null,this._cList=null,this._mess=null,this.id="i"+Math.random().toString(36).substr(2,7),this.children=null,this.props={},this.props.options=e.isLiteralObject(arguments[0])?arguments[0]:{},this.props.options=t,this.name="mynameisnobody",this.init(),this},_renderer(){return n.render(this)},$:null,$hyperscript(e,t){const n=[];for(let e=2;e<arguments.length;e++)n.push(arguments[e]);return{nodeName:e,attributes:t,children:n}},$getIdAndName(){return{id:this.id,name:this.name}},$getChildren(){return i.getChildren(this)},$getChild(e){return i.getChild(this,e)},$show(){return this.$().css("display","block"),this},$hide(){return this.$().css("display","none"),this},$listen(e,t){return this._mess.subscribe(e,t),this},$emit(e,t){return this._mess.publish(e,t),this},init(){return this},events(){return this},render:()=>"<div></div>"};t.extend(t.src.component.generic,{Construct:function(){this._init.apply(this,arguments)},methods:r})}(),function(){const e=t.src.component.animate,n=t.src.component.diffing;t.extend(t.src.component.$,{$:function(t){const i=this.id;let r,s;return t?r=document.querySelector("#"+i).querySelector(t):(r=document.querySelector("#"+i),s=r),{0:r,id:r?r.id:null,_root:s,select:function(e){if("string"==typeof e&&this[0]){const t=this[0].querySelector(e);t&&(this[0]=t)}return this},selectChild:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(this[0]=this[0].children[e]?this[0].children[e]:this[0]),this},parent:function(){return this._root?this[0]!==this._root&&(this[0]=this[0].parentNode):this[0]=this[0].parentNode,this},firstParent:function(){return this._root&&(this[0]=this._root),this},find:function(e){return this[0].querySelectorAll(e)},tag:function(){return this[0]?this[0].tagName:null},html:function(e){return e?(this[0].innerHTML=e,this):this[0].innerHTML},empty:function(){for(;this[0].firstChild;)this[0].removeChild(this[0].firstChild);return this},append:function(e){const t=document.createElement(e);return this[0]=this[0].appendChild(t),this},appendTextChild:function(e){return this[0].appendChild(document.createTextNode(e)),this},appendBefore:function(e,t){const n=document.createElement(e),i=this[0].querySelector(t);return this[0].insertBefore(n,i),this[0]=n,this},appendAfter:function(e,t){const n=document.createElement(e),i=this[0].querySelector(t).nextElementSibling;return this[0].insertBefore(n,i),this[0]=n,this},replace:function(e){const t=document.createElement(e);return this[0].parentNode.replaceChild(t,this[0]),this[0]=t,this},appendHTML:function(e){return"string"==typeof e&&this[0].insertAdjacentHTML("beforeend",e),this},prepend:function(e){return"string"==typeof e&&this[0].insertAdjacentHTML("afterbegin",e),this},after:function(e){return"string"==typeof e&&this[0].id!==i&&this[0].insertAdjacentHTML("afterend",e),this},before:function(e){return"string"==typeof e&&this[0].id!==i&&this[0].insertAdjacentHTML("beforebegin",e),this},replaceWith:function(e){const t=this[0],n=t.parentNode,r=document.createElement("div");if("string"==typeof e&&t.id!==i){r.innerHTML=e;const i=r.firstChild;n.replaceChild(i,t),this[0]=i}return this},text:function(e){return void 0!==e?(this[0].textContent=e,this):this[0].textContent},clone:function(e){return!0===e||!1===e?this[0].cloneNode(e):this[0].cloneNode(!0)},firstChild:function(){return this[0].firstElementChild},insertChildBefore:function(e,t){return e&&this[0].insertBefore(e,t),this},removeChild:function(e){return e&&this[0].removeChild(e),this},replaceChild:function(e,t){return e&&this[0].replaceChild(e,t),this},children:function(){return this[0].children},childIndex:function(){let e=this[0],t=0;for(;null!==e;)e=e.previousElementSibling,t+=1;return t-1},getRect:function(){return this[0]?this[0].getBoundingClientRect():null},css:function(e,t){const n="string"==typeof e?e.split("-"):[];let i="";for(let e=0;e<n.length;e++)i+=0===e?n[e]:n[e].charAt(0).toUpperCase()+n[e].slice(1);return t?(this[0].style[i]=t,this):this[0].style[i]},getClassList:function(){return this[0].classList},addClass:function(e){return this[0].classList.add(e),this},addClasses:function(e){if(Array.isArray(e))for(let t=0;t<e.length;t++)this[0].classList.add(e[t]);return this},removeClass:function(e){return this[0].classList.remove(e),this},removeClasses:function(e){if(Array.isArray(e))for(let t=0;t<e.length;t++)this[0].classList.remove(e[t]);return this},toggleClass:function(e){return this[0].classList.toggle(e),this},hasClass:function(e){const t=this[0].classList.value.split(" ");return"[object String]"===Object.prototype.toString.call(e)&&-1!==t.indexOf(e)},attr:function(e,t){return t?(this[0].setAttribute(e,t),this):this[0].getAttribute(e)},removeAttr:function(e){return e&&this[0].removeAttribute(e),this},animate:function(...t){return e.animate(this[0],...t),this},diff:function(e){return n.diff(n.stringToHTML(e),this[0]),this},on:function(e,t){return this[0].addEventListener(e,t),this},off:function(e,t){return this[0].removeEventListener(e,t),this},trigger:function(e){return this[0].dispatchEvent(new Event(e))}}}})}(),function(){const{_:e}=t.src.lib,n=t.src.component.hyperscript;function i(t){let i,r;if(i=t.render(),e.isLiteralObject(i)&&e.isString(i.nodeName)&&(t.children={},i=n.render(i,t.children)),r=i.match(/^\s*<div/)?i.replace(/^\s*<div/,`<div id="${t.id}"`):i.match(/^\s*<header/)?i.replace(/^\s*<header/,`<header id="${t.id}"`):i.match(/^\s*<footer/)?i.replace(/^\s*<footer/,`<footer id="${t.id}"`):i,t.children){t.children=function(t){if(!e.isLiteralObject(t))return{};const n={},i=Object.keys(t);let r;for(let s=0;s<i.length;s++)r=i[s],e.isFunction(t[r])?n[r]={fn:t[r],options:null}:e.isLiteralObject(t[r])&&e.isFunction(t[r].fn)?n[r]={fn:t[r].fn,options:t[r].options}:(n[r]={fn:null,options:null},console.log('warning: this component list is invalid. key "c" is missing!'));return n}(t.children),t._cList={};const n=Object.keys(t.children);let i,s;for(let o=0;o<n.length;o++)i=n[o],e.isFunction(t.children[i].fn)?(s=t.children[i].fn(t.children[i].options),s._tag=i,r=r.replace(i,s._renderer()),t._cList[i.replace(/[^a-zA-z0-9]/g,"")]=s):console.log(`warning: there is no component associated to this tag: ${i}!`)}return r}const r={render:e=>i(e),attachChild(e,t,n,i){!function(e,t,n,i){const r=t(n);r._tag=i,e._cList||(e._cList={}),e.children||(e.children={}),e._cList[r._tag.replace(/[^a-zA-z0-9]/g,"")]=r,e.children[i]={fn:t,options:n}}(e,t,n,i)},removeChild(t,n){!function(t,n){e.isString(n)&&e.isLiteralObject(t._cList)&&(delete t._cList[n.replace(/[^a-zA-z0-9]/g,"")],delete t.children[n])}(t,n)}};t.extend(t.src.component.render,r)}(),function(){const{_:e}=t.src.lib;const n={getChildren:e=>e._cList?function(e){const t=Object.keys(e._cList),n=[];for(let i=0;i<t.length;i++)n.push({id:e._cList[t[i]].id,name:e._cList[t[i]].name});return n}(e):null,getChild:(t,n)=>n&&e.isString(n)?function e(t,n){if(!t._cList)return null;const i=Object.keys(t._cList);let r;for(let s=0;s<i.length;s++){if(r=i[s],n===t._cList[r]._tag||n===t._cList[r].id||n===t._cList[r].name)return t._cList[r];const o=e(t._cList[r],n);if(o)return o}return null}(t,n):null};t.extend(t.src.component.util,n)}(),function(){const{_:e}=t.src.lib;function n(e,t,n,i){return n*(.5-Math.cos(e/i*Math.PI)/2)+t}function i(t){const n=e.isString(t)?t.split("-"):[];let i="";for(let e=0;e<n.length;e++)i+=0===e?n[e]:n[e].charAt(0).toUpperCase()+n[e].slice(1);return i}function r(e,t,n,r,s,o){const c=function(e,t){const n=Object.keys(t),r=window.getComputedStyle(e),s={},o=[];let c,l,a,u;for(let d=0;d<n.length;d++)c=i(n[d]),l=r.getPropertyValue(c),l&&(o.push(c),l=parseFloat(l,10),u=t[n[d]].replace(/[0-9.]/g,""),"%"===u&&(a=parseFloat(window.getComputedStyle(e.parentNode).getPropertyValue(c)),l=l/a*100),s[c]={initial:l,change:parseFloat(t[n[d]])-l,suffix:u});return s.name=o,s}(e,t),l=e;let a,u=0;const d=setInterval(()=>{for(let e=0;e<c.name.length;e++)a=n(u,c[c.name[e]].initial,c[c.name[e]].change,r),l.style[c.name[e]]=a+c[c.name[e]].suffix;u+=s,u>r&&(clearInterval(d),o&&o())},s)}const s={animate(t,i,...s){if(!e.isLiteralObject(i))return;const o=function(...t){const n=t[0],i=t[1],r=t[2];let s,o,c,l;switch(s=n||i||r?!n||i||i?n&&i&&!r?2:3:1:0,s){case 0:break;case 1:e.isNumber(n)||"fast"===n||"slow"===n?o=n:e.isString(n)?c=n:e.isFunction(n)&&(l=n);break;case 2:e.isNumber(n)||"fast"===n||"slow"===n?(o=n,e.isString(i)?c=i:e.isFunction(i)&&(l=i)):e.isString(n)&&(c=n,e.isFunction(i)&&(l=i));break;case 3:(e.isNumber(n)||"fast"===n||"slow"===n)&&(o=n),e.isString(i)&&(c=i),e.isFunction(r)&&(l=r)}return{duration:o,easing:c,callback:l}}(...s),c=e.isNumber(o.duration)&&o.duration>0?o.duration:"fast"===(l=o.duration)?200:"slow"===l?600:400;var l;r(t,i,window.Easing&&window.Easing[o.easing]?window.Easing[o.easing]:n,c,10,o.callback?o.callback:null)}};t.extend(t.src.component.animate,s)}(),t.src.view});export default $__ES6GLOB.View;